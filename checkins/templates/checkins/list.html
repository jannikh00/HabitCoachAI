{% extends "base.html" %}
{% block title %}My Check-ins{% endblock %}

{% block content %}
<!-- Page heading -->
<h1 class="page-title">My Check-ins</h1>
<p class="page-subtitle">Overview of all your submitted check-ins.</p>

<!-- Table displaying all user-submitted check-ins -->
<section class="card">
  <table class="table">
    <thead>
      <tr>
        <!-- Column headers for check-in data -->
        <th>Date</th>
        <th>Status</th>
        <th>Mood</th>
        <th>HRV</th>
        <th>Notes</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <!-- Loop through each check-in object passed from the view -->
      {% for c in checkins %}
      <tr>
        <!-- Localized date of the check-in -->
        <td>{{ c.local_date }}</td>

        <!-- Human-readable status label (via model's choices display) -->
        <td>{{ c.get_status_display }}</td>

        <!-- Mood value or dash if missing -->
        <td>{{ c.mood|default:"–" }}</td>

        <!-- HRV RMSSD (ms), or dash if not provided -->
        <!-- Optional physiological metric for recovery tracking -->
        <td>{{ c.hrv_rmssd|default:"–" }}</td>

        <!-- Free-text note, or dash if empty -->
        <td>{{ c.note|default:"–" }}</td>

        <!-- Edit / Delete actions -->
        <td>
          <a href="{% url 'checkins:checkin_edit' c.pk %}">Edit</a>
          <form method="post" action="{% url 'checkins:checkin_delete' c.pk %}" style="display:inline">
            {% csrf_token %}
            <button type="submit" class="btn-link text-danger"
              onclick="return confirm('Delete this check-in? This cannot be undone.')">
              Delete
            </button>
          </form>
        </td>
      </tr>

      <!-- Fallback row if user has no check-ins yet -->
      {% empty %}
      <tr>
        <td colspan="6" class="text-muted">No check-ins yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}